---
import { Picture } from "astro:assets";
import type { Product, ProductWithVariablePrice } from "@/types";
import { formatCurrency } from "@/utils";
import PriceWithVariants from "@/components/products/PriceWithVariants.astro";

interface Props {
    product: Product;
}
const { product } = Astro.props;
---

<div class="border border-gray-200">
    <Picture
        src={product.featured_images.full.url}
        width={product.featured_images.full.width}
        height={product.featured_images.full.height}
        alt={`Imagen de ${product.title.rendered}`}
        formats={["avif", "webp"]}
        sizes="(max-width: 640px) 100vw, (max-width: 1280px) 50vw, 33vw"
        loading="lazy"
    />
    <div class="p-5">
        <h3 class="text-2xl font-black h-20">{product.title.rendered}</h3>

        {
            product.acf.variable_price ? (
                <PriceWithVariants
                    product={product as ProductWithVariablePrice}
                />
            ) : (
                <p class="mt-5 text-4xl text-amber-400 font-black">
                    {formatCurrency(product.acf.price)}
                </p>
            )
        }
    </div>
</div>
